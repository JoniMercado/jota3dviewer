<!doctype html><meta charset="utf-8">
<title>DNDrop test 3</title>
<style>
  html,body{height:100%;margin:0;background:#111;color:#eee;font:14px system-ui}
  #box{position:fixed;inset:0;border:3px dashed #4aa3ff;display:flex;
       align-items:center;justify-content:center}
  #log{position:fixed;left:12px;right:12px;bottom:12px;white-space:pre-wrap;
       background:#000a;padding:8px;border-radius:8px}
  button{position:fixed;left:12px;top:12px}
</style>
<div id="box">Drop a .glb file here</div>
<button id="pick">Open file…</button>
<pre id="log">Waiting…</pre>
<script>
  const log = (...a)=>{ document.getElementById('log').textContent = a.join(' ') + "\n" + document.getElementById('log').textContent }

  // Fallback: input file
  document.getElementById('pick').onclick=()=>{
    const i=document.createElement('input');
    i.type='file'; i.accept='.glb,model/gltf-binary,model/gltf+binary,application/octet-stream';
    i.onchange=()=>{ const f=i.files&&i.files[0]; if(f) log('PICKED:', f.name, f.type||'unknown', f.size+' bytes'); };
    i.click();
  };

  // Prevent default navigation everywhere (capture phase too)
  function prevent(e){ e.preventDefault(); e.stopPropagation(); return false; }
  ['dragenter','dragover','dragleave','drop'].forEach(ev=>{
    window.addEventListener(ev, prevent, true);
    document.addEventListener(ev, prevent, true);
    document.body.addEventListener(ev, prevent, true);
    document.getElementById('box').addEventListener(ev, prevent, true);
  });

  // Verbose event logs
  ['dragenter','dragover','dragleave','drop'].forEach(ev=>{
    window.addEventListener(ev, ()=> log('WINDOW', ev), false);
    document.addEventListener(ev, ()=> log('DOCUMENT', ev), false);
    document.body.addEventListener(ev, ()=> log('BODY', ev), false);
    document.getElementById('box').addEventListener(ev, ()=> log('#BOX', ev), false);
  });

  // Handle drop
  document.addEventListener('drop', (e)=>{
    const dt=e.dataTransfer;
    const f = dt && dt.files && dt.files[0];
    log('DROP event. types=', dt?.types ? Array.from(dt.types).join(',') : 'none');
    if(f){ log('FILE:', f.name, f.type||'unknown', f.size+' bytes'); }
  }, false);
</script>
